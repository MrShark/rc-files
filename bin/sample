#!/usr/bin/env python

"""
  Skeleton Python script

  Purpose:
  ...
"""

import os
import sys
import argparse

from random import sample

scriptname  = os.path.basename(sys.argv[0])
__version__   = "0.0.1"
__id__        = ""


args = None



def init():
    """
    Initialize the enviorment and parse options
    """
    global args
    parser = argparse.ArgumentParser(description='Read files and print a random percentage of the lines')
    parser.add_argument('--debug', dest='debug_level',
                        type=int, default=0, help='Debug level, higher is more info')
    parser.add_argument('--percentage', dest='percentage',
                        type=int, default=1, help='Percentage of the lines to print')

    parser.add_argument('file', metavar='FILE', type=file, default=[sys.stdin],
                        nargs="*", help='files to process')

    args = parser.parse_args()



def main():
    """
    Main prosessing
    """
    init()

    lines = []
    for f in args.file:
        lines.extend(f.read().splitlines())

    for l in sample(lines, len(lines)*args.percentage/100):
        print l
    return 0



if __name__ == '__main__' or __name__ == sys.argv[0]:
    try:
        sys.exit(main())
    except KeyboardInterrupt, e:
        print "[%s]  Interrupted!" % scriptname

